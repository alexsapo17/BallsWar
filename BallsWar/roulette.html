
<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roulette Game</title>
    <style>
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        @keyframes rotateWheel {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        body {
            margin: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
            background-image: radial-gradient(#444, #222);
            color: white;
        }
        canvas {
            display: block;
            margin: 0 auto;
            background-color: #222;
        }
        #ui {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            padding: 10px;
            background-color: rgba(0, 0, 0, 0.7);
            border-radius: 5px;
            width: 90%;
            max-width: 340px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
        }
        select, button {
            margin-top: 10px;
            padding: 5px 10px;
            font-size: 16px;
            border: 1px solid #555;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            background-color: #333;
            color: #fff;
        }
        button:hover, select:hover {
            background-color: #555;
        }
        button:active {
            transform: scale(0.95);
        }
        #feedback {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px 25px;
            border-radius: 5px;
            font-size: 24px;
            animation: pulse 1s infinite;
        }
    </style>
</head>
<body>
    <h1 style="text-align: center; margin-top: 20px; font-size: 28px; text-shadow: 2px 2px 5px #000;">Roulette</h1>
    <div id="ui">
        Saldo: <span id="balance" style="font-weight: bold;">1000</span><br>
        Tipo di scommessa: 
        
            <select id="betType">
                <option value="red">Rosso</option>
                <option value="black">Nero</option>
                <option value="even">Pari</option>
                <option value="odd">Dispari</option>
                <option value="zero">Zero</option>
            </select>
            
        </select><br>
        Scommessa: 
        <select id="betAmount">
            <option value="100">100</option>
            <option value="200">200</option>
            <option value="500">500</option>
        </select>
        <button onclick="spinRoulette()">Gira!</button>
        <div id="feedback" style="display: none;"></div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.54.0/dist/phaser.min.js"></script>
    <script>
     const config = {
        type: Phaser.AUTO,
        width: 360,
        height: 640,
        scene: {
            preload: preload,
            create: create,
            update: update
        }
    };

    const game = new Phaser.Game(config);
    let roulette;
    let ball;
    let isSpinning = false;
    let balance = 1000;
    let betType;
    let currentScene;

    function preload() {
        this.load.image('ball', 'ball.png');
    }

        function create() {
    roulette = this.add.circle(180, 320, 150, 0xCCCCCC);
    const segments = 37;  // 36 numeri + lo zero
    currentScene = this;
    for (let i = 0; i < segments; i++) {
        const angleStart = (i / segments) * (2 * Math.PI);
        const angleEnd = ((i + 1) / segments) * (2 * Math.PI);
        let color;
        if (i === 0) {
            color = 0x00FF00;  // Green for zero
        } else {
            color = i % 2 === 1 ? 0xFF0000 : 0x000000;
        }
        const graphics = this.add.graphics({ fillStyle: { color: color } });
        graphics.slice(180, 320, 130, angleStart, angleEnd, false);
        graphics.fillPath();
        const x = 180 + 115 * Math.cos(angleStart + (angleEnd - angleStart) / 2);
        const y = 320 + 115 * Math.sin(angleStart + (angleEnd - angleStart) / 2);
        this.add.text(x, y, i.toString(), {
            fontSize: '14px',
            color: '#FFF',
            align: 'center',
            fontStyle: 'bold',
            shadow: {
                offsetX: 2,
                offsetY: 2,
                color: '#000',
                blur: 2,
                fill: true
            }
        }).setOrigin(0.5);
    }

    for (let i = 0; i < segments; i++) {
        const angle = (i / segments) * (2 * Math.PI);
        const x = 180 + 150 * Math.cos(angle);
        const y = 320 + 150 * Math.sin(angle);
        this.add.line(180, 320, x, y, 0x000000, 1).setLineWidth(3);
    }
    this.add.circle(180, 320, 20, 0x000000);

    ball = this.add.image(180, 320 - 10, 'ball').setScale(0.2);
    ball.visible = false;

    this.tweens.add({
        targets: roulette,
        rotation: 0.05,
        yoyo: true,
        repeat: -1,
        duration: 1500
    });
}

function spinRoulette() {
    betType = document.getElementById("betType").value;
    const bet = parseInt(document.getElementById("betAmount").value);
    if (balance < bet) {
        alert("Saldo insufficiente per questa scommessa!");
        return;
    }
    if (isSpinning) return;
    balance -= bet;
    document.getElementById("balance").innerText = balance;
    isSpinning = true;
    ball.visible = true;
    let totalRotation = Phaser.Math.Between(10, 15) * 2 * Math.PI;

    let winningSegment = Phaser.Math.Between(0, 36);

    let offsetAngle = (2 * Math.PI) / 37 / 2;
    let anglePerSegment = (2 * Math.PI) / 37;
    totalRotation += anglePerSegment * (winningSegment + 0.5); // Adjust to make ball land in the center

    currentScene.tweens.add({
        // ... [keep the rest unchanged]
    });

    // Rimbalzo della pallina
    currentScene.tweens.add({
        // ... [keep the rest unchanged]
    });

    // Logic for winnings
    const feedbackElement = document.getElementById("feedback");
    if (winningSegment === 0) {
        if (betType === "zero") {
            balance += bet * 36; // Player wins 35 times the bet plus the original bet.
            feedbackElement.innerText = `Lo zero è uscito! Hai vinto ${bet * 36}!`;
        } else {
            feedbackElement.innerText = "Lo zero è uscito! Hai perso!";
        }
    } else {
        const isRed = winningSegment % 2 === 1;
        const isEven = winningSegment % 2 === 0;

        
if (winningSegment === 0) {
    if (betType === "zero") {
        balance += bet * 36; // Player wins 35 times the bet plus the original bet.
        feedbackElement.innerText = `Lo zero è uscito! Hai vinto ${bet * 36}!`;
    } else {
        feedbackElement.innerText = "Lo zero è uscito! Hai perso!";
    }
} else if ((betType === "red" && isRed) || (betType === "black" && !isRed)) {
    balance += bet * 2;
    feedbackElement.innerText = `Hai vinto ${bet * 2} nel segmento ${winningSegment} (${isRed ? "Rosso" : "Nero"})!`;
} else if ((betType === "even" && isEven) || (betType === "odd" && !isEven)) {
    balance += bet * 2;
    feedbackElement.innerText = `Hai vinto ${bet * 2} nel segmento ${winningSegment} (${isEven ? "Pari" : "Dispari"})!`;
} else {
    feedbackElement.innerText = `Hai perso! Il segmento vincente è ${winningSegment} (${isRed ? "Rosso" : "Nero"}).`;
}

            balance += bet * 2;
            feedbackElement.innerText = `Hai vinto ${bet * 2} nel segmento ${winningSegment} (${isRed ? "Rosso" : "Nero"})!`;
        } else {
            feedbackElement.innerText = `Hai perso! Il segmento vincente è ${winningSegment} (${isRed ? "Rosso" : "Nero"}).`;
        }
    }
    feedbackElement.style.display = "block";
    setTimeout(() => feedbackElement.style.display = "none", 3000);
    document.getElementById("balance").innerText = balance;
    if (balance <= 0) {
        alert("Hai esaurito il tuo saldo! Ricarica la pagina per ricominciare.");
    }
}



function update() {
    if (isSpinning) {
        
ball.x = 180 + 135 * Math.cos(roulette.rotation + Math.PI / 2);  // Adjusted the radius for ball positioning
ball.y = 320 + 135 * Math.sin(roulette.rotation + Math.PI / 2);

        ball.y = 320 + 115 * Math.sin(roulette.rotation + Math.PI / 2);
    }
}
    </script>
</body>
</html>